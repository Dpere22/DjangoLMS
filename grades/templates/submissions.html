<!DOCTYPE html>

<meta charset="utf-8">
<link rel="icon" href="../../static/favicon.ico">
<link rel="stylesheet" href="/static/main.css">

{% include "header.html" with title="Submissions" %}

<main>
    <div class="page-content">
        <div class = "title">
            <h1> {{ assignment.title }} </h1>
            <h2> All grades out of {{ assignment.points }} </h2>
        </div>
    <form action="/{{ assignment_id }}/submissions" method="post">
        {%  csrf_token %}
        <table>
            <thead>
                <tr>
                    <th>
                        Student
                    </th>
                    <th>
                        Submission
                    </th>
                    <th>
                        Grade
                    </th>
                </tr>
            </thead>
            <tbody>
                <output>
                    {% for err in other_errors %}
                        <p>
                            {{ err }}
                        </p>
                    {% endfor %}
                </output>
                {% for submission, errors in organized %}
                    <tr>
                        <td>
                            <label for="{{ submission.author.get_full_name }}">{{ submission.author.get_full_name }}</label>
                        </td>
                        <td>
                            <a href = {{ submission.file.url }}>Submission</a>
                        </td>
                        <td>
                            <input type="number" value="{{ submission.score }}" id="{{ submission.author.get_full_name }}"
                                   name="grade-{{ submission.id }}" min="0" max="{{ submission.assignment.points }}">
                        </td>
                        <td>
                            <output>
                                {% for err in errors %}
                                    {{ err }}
                                {% endfor %}
                            </output>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
            <button type = "submit" class="SubmitButton">Submit</button>
            <a href="/{{ assignment_id }}/">Back to assignment</a>
        </form>
    </div>
</main>

